### Расчет оптимальных покупок облигаций (задача о трейдере)


##### Запуск

```python trader.py --file data/trader.txt```

*Параметры:*

- `--file (-f)` - имя файла с исходными данными
- `--verbose` - вывод промежуточных расчетов для отладки (по-умолчанию False)

проверялось на python 3.6

##### Тесты

```python tests.py```

##### Детали реализации

Задание сводится к "Задаче о рюкзаке" (0-1 Knapsack). 
В данном случае реализовано решение методом ветвей и границ. 

Общий алгоритм вычислений:   

1. Читаем исходные данные и преобразуем их в список объектов типа Lot (лот облигаций).
При этом расчитывается доход от всех облигаций лота = купонный доход + доход от продажи и сумарная стоиомсть покупки лота.
Обе величины номинируются умножаются на 100 и хранятся в int-переменных.

1. После формирования списка Lot-объектов, сортируем его по убыванию соотношения "доход\стоимость".

1. Проходя по отсортированному списку лотов строим дерево решений - для каждого лота создаем пару "узлов" (Node) - один (левый) отображает ситуацию когда этот лот куплен, второй (правый) - когда лот не куплен. У каждого узла затем строим свои "левый" и "правый" под-узлы по тому же принципу - "растим дерево вниз".
Если при добавлении левого узла - сумма потраченных на покупки средств превыщает бюджет - не добаляем такой узел в дерево. 

1. В каждом узле вычисляем доход полученный от всех лотов купленных до этого момента. Максимальный доход - записываем. 

1. По каждому узлу дерева решений вычисляем верхнюю границу = сколько мы получим дохода, если будем с текущего момента покупать все оставшиеся лоты пока хватает денег. 
Если верхняя граница меньше текущего максимального дохода - вычеркиваем узел из последующей обработки - "ниже" этого узла точно не будет оптимального решенния.
В противном случае новый узел добавляется в очередь для обработки и из него затем вырастают новые ветки.  

1. Процесс останавливается когда найдены все допустимые покупки, кроме тех кто не прошел по ограничениям верхней оценки либо бюджета. 
В этот момент известен узел с максимальным доходом - он и является решением.


##### Ограничения алгоритма

- Предложенный метод является оптимизированным методом решения полным перебором, 
в худщем случае сложность будет O(2^n)

По памяти: - в худшем случае O(2^n). Кроме того я храню в каждом узле список купленных лотов, это надо перестать делать.
 